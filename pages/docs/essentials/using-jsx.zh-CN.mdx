---
title: 使用 JSX
---

import Callout from 'nextra-theme-docs/callout';

# 使用 JSX

以下声明样式：

```jsx
const HelloWorld = <p>Hello World</p>;
```

被称为 JSX，它是 JavaScript 的语法扩展。就像 React 一样，您可以使用 JSX 和 Million.js 来描述 UI 应该是什么样子。 JSX 可能会让您想起模板语言，但它具有 JavaScript 的全部功能。

JSX 产生百万个 VNode。下面，您可以了解如何将 JSX 集成到您自己的项目中。

## Babel

<Callout emoji="ℹ️">
  用 Babel 预设 JSX 转换。 Babel 可以很容易地与 Webpack、Parcel 或 Rollup
  等其他打包工具一起使用，或者 独立的。
</Callout>

或者，您可以使用 [`@babel/plugin-transform-react-jsx`](https://babeljs.io/docs/en/babel-plugin-transform-react-jsx/) 手动配置 JSX 转换。是转换数据的两种主要方法，因此请选择最适合您的项目的一种。

### Automatic runtime _(推荐)_

Million.js 通过 `million/jsx-runtime` 提供了一个自动 JSX 转换选项。 Babel 默认使用经典运行时，所以你需要明确声明你想要自动运行时。此外，您将需要指定导入源。无需使用自动运行时显式导入 `million/jsx-runtime`。

`index.jsx`

```jsx
const HelloWorld = <p>Hello World</p>;
```

`.babelrc`

```json
{
  "plugins": [
    [
      "@babel/plugin-transform-react-jsx",
      {
        "runtime": "automatic",
        "importSource": "million"
      }
    ]
  ]
}
```

### Classic runtime

如果自动运行时不适合您，或者您想要更细粒度的控制，您应该使用经典运行时。您需要使用来自 `million/jsx-runtime` 的导入来定义 `pragma` 和 `pragmaFrag` 字段，如下所示。

<Callout type="warning" emoji="⚠️">
  这通常比较麻烦，因为您需要在每个文件中导入 `million/jsx-runtime` 使用 JSX（如果您使用
  IDE，它可能会显示为未使用的变量）。
</Callout>

`index.jsx`

```jsx
import { h, Fragment } from 'million/jsx-runtime'; // This is required

const HelloWorld = <p>Hello World</p>;
```

`.babelrc`

```json
{
  "plugins": [
    [
      "@babel/plugin-transform-react-jsx",
      {
        "runtime": "classic",
        "pragma": "h",
        "pragmaFrag": "Fragment"
      }
    ]
  ]
}
```

## Vite

依赖 [esbuild](https://esbuild.github.io) 的 Bundler，例如 Vite，目前不支持或计划实现 `jsx-runtime`。为了“模拟” Babel 的自动运行时，Vite 提供了 `jsxInject` 字段，它会自动注入 import 语句。

<Callout type="warning" emoji="⚠️">
  Esbuild 的语法与 vite 略有不同，您应该 [参考
  文档]（https://esbuild.github.io/content-types/#auto-import-for-jsx）了解更多信息。
</Callout>

`index.jsx`

```jsx
const HelloWorld = <p>Hello World</p>;
```

`vite.config.js`

```js
import { defineConfig } from 'vite';

export default defineConfig({
  esbuild: {
    jsxFactory: 'h',
    jsxFragment: 'Fragment',
    jsxInject: `import { h, Fragment } from 'million/jsx-runtime'`,
  },
});
```
