---
title: schedule
---

# `schedule`

**语法：** `schedule(callback)`\
**示例：** `schedule(() => patch(el, m('div')))`

`schedule` 函数用作延迟提交函数以防止主线程阻塞。

调度通常用于诱导增量渲染，或将渲染工作拆分为块并将其分散到多个帧上的能力。通常，如果您多次重复某个补丁，或者您想要去抖动操作，您想要使用它。

```js
import { m, diff, props, children, schedule, createElement } from 'million';

const patch = (el, newVNode, oldVNode, effects = []): DOMNode => {
  const diff = node([children(), props()]);
  // async rendering
  const data = diff(el, newVNode, oldVNode, effects, schedule);
  for (let i = 0; i < effects.length; i++) {
    effects[i]();
  }
  return data.el;
};

const vnode0 = m('div');
const el = createElement(vnode0);

document.body.appendChild(el);
const vnode1 = m('div', { id: 'app' }, ['Hello World']);

// async rendering
schedule(() => {
  patch(el, vnode1);
});
```
